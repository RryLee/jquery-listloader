!function(e){"use script";e.fn.listLoader=function(t){var n=e(this),i=e.extend({source:"",step:2,hideLoader:!0},t),o=!1,r=1,d=void 0==t.itemElement?n.find(".item"):n.find(t.itemElement),s=e(void 0==t.itemsElement?".items":t.itemsElement),c=e(void 0==t.loaderElement?".items-loader":t.loaderElement),u=function(){if(void 0==i.finishedFunction){if(i.hideLoader===!1)return;c.remove()}else i.finishedFunction()},l=function(e){var t,n;d.remove();for(t in e)e.hasOwnProperty(t)&&(n=d.find('*[data-field="'+t+'"]'),n.length&&n.text(e[t]));d.clone().appendTo(s)},a=function(t,n){return o===!0?void u():void e.ajax({url:i.source,type:"get",dateType:"json",data:{offset:t,count:n},success:function(t){var i=t.items;i.length&&(e(i).each(function(e,t){l(t)}),r+=n),t.last===!0&&(o=!0,u())}})};i.source.length?(c.on("click",function(){a(r,i.step)}),a(1,i.step)):console.log("Source required.")}}(jQuery);